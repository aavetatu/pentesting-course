# H2 Totally Legit Sertificiate

### x) Read and Summarize

[PortSwigger: SQL injection](https://portswigger.net/web-security/sql-injection)

SQL injection is used to view, modify or delete data they have no permisson for
SQL queries can be modfied to retrieve hidden data
SQL injections can sometimes be obfuscated by putting inputs in JSON or XML format
SQL queries shoiuld be used as prepared statements instead of string concatenation to prevent SQL injections

[PortSwigger: Cross-site scripting](https://portswigger.net/web-security/cross-site-scripting)

Cross-site scripting is used to compromise interactions that users have
With XSS the attacker tries to compromise victim by returning their queries with malicious JavaScript
Malicious script can be spread by the current HTTP request or by the website's database

### a) Install ZAP and prove you can capture traffic from your browser

First I installed ZAProxy and opened it

	$ sudo apt-get update 
	$ sudo apt-get -y install zaproxy
	$ zaproxy 
![image](https://user-images.githubusercontent.com/52470440/232344371-12819da2-1150-4264-8114-d2c2fe42ee55.png)

I used ZAProxy quick start to start capturing traffic without needing to configure browser myself

![image](https://user-images.githubusercontent.com/52470440/232344399-e42a4ff2-4217-4e68-9163-a51d9f9c8192.png)


### b) Install fake CA-sertificate and capture HTTPS traffic

[reference of quide for these tasks](https://github.com/therealhalonen/penetration_testing/blob/master/h2/report.md)

I opened ZAProxy and headed to *Tools* -> *Options* -> *Network* -> *Local Servers/Proxies* to configure proxy address and port

From previous experience of doing this homework I knew I needed to change one of the ports of the services used so I chose to configure Zap to use port 8888

![image](https://user-images.githubusercontent.com/52470440/233136989-3d09d5da-8a11-4f66-9060-9513e9d40170.png)

For creating the certificate I headed to *Tools* -> *Options* -> *Network* -> *Server Certificates* -> *Root CA Certificate* -> *Generate* -> *Yes* -> *Save*

![image](https://user-images.githubusercontent.com/52470440/233137810-797a86a1-f145-4814-b75d-21678755c1e5.png)

I opened Google in Firefox to make sure Firefox wasn't using the certificaet yet

![image](https://user-images.githubusercontent.com/52470440/233138309-409e765c-8891-49c7-a614-382c0bb6ecad.png)

-> *Settings* -> *Search* -> *"Certificate"* -> *View Certificates...* -> *Authorities* -> *Import* -> owasp_zap_root_ca.cer -> [X] Trust this CA to identify websistes. -> *Ok* -> *Ok* 

![image](https://user-images.githubusercontent.com/52470440/233139841-fadb3dc6-67ae-4c00-8595-18c7710ad800.png)

-> *Settings* -> *Search* -> *"Proxy"* -> *Settings...* -> *Manual proxy configuration* -> HTTPS Proxy: localhost | Port: 8888 -> *Ok*

![image](https://user-images.githubusercontent.com/52470440/233160588-7b53bde0-9a27-432e-a151-cc0e74603731.png)

Proof of captured HTTPS traffic

![image](https://user-images.githubusercontent.com/52470440/233160734-5116f11c-df66-468c-b658-f540fc4a6993.png)

### c) Intercept a request, edit it, and let it through

I used [Santtu Hurris](https://santtuhurri.wordpress.com/2023/04/15/tunkeutumistestaus-harjoitus-2/) homework report as a helping guide for this task

I began by starting up metasploitable2 and disconnecting my Kali virtual machine from the internet

I opened Zap and headed to `192.168.176.4/mutillidae` but for some reason I couldn't capture traffic to `192.168.176.4`
Zap captured traffic to anywhere else I tried to connect

![image](https://user-images.githubusercontent.com/52470440/233167468-529e77e6-3115-451e-94ee-3d4863011958.png)

Because previous test didn't work and I couldn't edit intercepted traffic I put a picture of intercepted request to https://www.kali.org/docs/virtualization/

![image](https://user-images.githubusercontent.com/52470440/233169528-1052cb69-22d5-4f78-b743-ac709cfc15cc.png)

### d) Install WebGoat and log in

I read an article about [installing WebGoat](https://terokarvinen.com/2020/install-webgoat-web-pentest-practice-target/)

I installed and started WebGoat

	$ wget https://terokarvinen.com/2020/install-webgoat-web-pentest-practice-target/webgoat-server-8.0.0.M26.jar
	$ java -jar webgoat-server-8.0.0.M26.jar
	
I opened WebGoat in browser and made a new user

![image](https://user-images.githubusercontent.com/52470440/232344436-22a75a1b-6626-43a5-8708-a88e0e99f980.png)

And it logged me in automatically

### e) Complete "HTTP Basics" and "Developer tools"

I opened *General* -> *Developer Tools* and read the instructions

I opened browser developer tools by pressing *CTRL+SHIFT+I* -> *Console*

  >> webgoat.customjs.phoneHome()

![image](https://user-images.githubusercontent.com/52470440/232343891-9c3e3be1-a2c7-4c12-9c0c-3879c5b951eb.png)

![image](https://user-images.githubusercontent.com/52470440/232344962-4a94de1b-888d-41f9-a3ba-9766d36311d0.png)

## Sources

https://terokarvinen.com/2023/tunkeutumistestaus-2023-kevat/

https://terokarvinen.com/2020/install-webgoat-web-pentest-practice-target/

https://portswigger.net/web-security/sql-injection

https://portswigger.net/web-security/cross-site-scripting

https://github.com/therealhalonen/penetration_testing/blob/master/h2/report.md

https://santtuhurri.wordpress.com/2023/04/15/tunkeutumistestaus-harjoitus-2/
